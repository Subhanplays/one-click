#!/bin/bash

# ===============================
# üöÄ Interactive Panel Installer
# ===============================

# -------------------------------
# Pterodactyl Menu
# -------------------------------
pterodactyl_menu() {
    source=$1
    while true; do
        clear
        echo "==============================="
        echo " üê¶ Pterodactyl Installer ($source)"
        echo "==============================="
        echo "1) Install Panel"
        echo "2) Install Wings (Node)"
        echo "3) Setup 24/7"
        echo "4) Setup Cloudflare Tunnel"
        echo "0) Back"
        read -p "Choose an option: " choice

        case $choice in
            1) bash <(curl -s https://raw.githubusercontent.com/Subhanplays/Pterodacrtyl-panel/main/panel) ;;
            2) bash <(curl -s https://raw.githubusercontent.com/Subhanplays/Pterodacrtyl-panel/main/wings) ;;
            3) python3 <(curl -s https://raw.githubusercontent.com/Subhanplays/24-7/main/24-7.py) ;;
            4) bash <(curl -s https://raw.githubusercontent.com/Subhanplays/Cloudflare-Tunnel/main/pterodactyl.sh) ;;
            0) break ;;
            *) echo "‚ùå Invalid option"; sleep 1 ;;
        esac
    done
}

# -------------------------------
# Skyport Menu
# -------------------------------
skyport_menu() {
    source=$1
    while true; do
        clear
        echo "==============================="
        echo " üöÄ Skyport Installer ($source)"
        echo "==============================="
        echo "1) Install Skyport Panel"
        echo "2) Install Skyport Node"
        echo "3) Setup 24/7"
        echo "0) Back"
        read -p "Choose an option: " choice

        case $choice in
            1) bash <(curl -s https://raw.githubusercontent.com/Subhanplays/skyport-panel/main/panel.sh) ;;
            2) bash <(curl -s https://raw.githubusercontent.com/Subhanplays/skyport-panel/main/node.sh) ;;
            3) python3 <(curl -s https://raw.githubusercontent.com/Subhanplays/24-7/main/24-7.py) ;;
            0) break ;;
            *) echo "‚ùå Invalid option"; sleep 1 ;;
        esac
    done
}

# -------------------------------
# PufferPanel Menu
# -------------------------------
pufferpanel_menu() {
    source=$1
    while true; do
        clear
        echo "==============================="
        echo " üê° PufferPanel Installer ($source)"
        echo "==============================="
        echo "1) Install PufferPanel"
        echo "2) Create Admin User"
        echo "3) Enable & Start Service"
        echo "0) Back"
        read -p "Choose an option: " choice

        case $choice in
            1) 
                echo "üëâ Installing PufferPanel..."
                bash <(curl -s https://raw.githubusercontent.com/subhanplays/hostingsetups/main/puffer-panel-install)
                ;;
            2) 
                echo "üëâ Creating PufferPanel Admin User..."
                sudo pufferpanel user add
                ;;
            3) 
                echo "üëâ Enabling & Starting PufferPanel Service..."
                sudo systemctl enable --now pufferpanel
                ;;
            0) break ;;
            *) echo "‚ùå Invalid option"; sleep 1 ;;
        esac
    done
}

# -------------------------------
# MAIN MENU
# -------------------------------
while true; do
    clear
    echo "====================================="
    echo " üöÄ PANEL INSTALLER MAIN MENU"
    echo "====================================="
    echo "1) GitHub"
    echo "2) CodeSandbox"
    echo "0) Exit"
    read -p "Choose an option: " main_choice

    case $main_choice in
        1) source="GitHub" ;;
        2) source="CodeSandbox" ;;
        0) echo "üëã Exiting..."; exit 0 ;;
        *) echo "‚ùå Invalid option"; sleep 1; continue ;;
    esac

    # Panel selection after choosing source
    while true; do
        clear
        echo "==============================="
        echo " üìÇ Select Panel ($source)"
        echo "==============================="
        echo "1) Pterodactyl"
        echo "2) Skyport"
        echo "3) PufferPanel"
        echo "0) Back"
        read -p "Choose an option: " panel_choice

        case $panel_choice in
            1) pterodactyl_menu "$source" ;;
            2) skyport_menu "$source" ;;
            3) pufferpanel_menu "$source" ;;
            0) break ;;
            *) echo "‚ùå Invalid option"; sleep 1 ;;
        esac
    done
done
